#This code is a basic sender code based off https://github.com/thotro/arduino-dw1000/tree/master
#Review your pin inputs so that they match what is shown below. This code is used to send distance readings from one DWM1000-enabled ESP32 to another. 



#include <SPI.h>
#include <DW1000.h>

const uint8_t PIN_RST = 27;
const uint8_t PIN_CS  = 4;
const uint8_t PIN_IRQ = 34;

const char* messages[] = {"one", "two", "three", "four", "five"};
uint8_t msgIndex = 0;
const uint8_t NUM_MESSAGES = 5;

void setup() {
  Serial.begin(115200);
  delay(1000);
  Serial.println("=== DWM1000 BASIC SENDER (1-5) ===");

  SPI.begin(18, 19, 23);

  DW1000.begin(PIN_IRQ, PIN_RST);
  DW1000.select(PIN_CS);

  DW1000.setDeviceAddress(1);

  DW1000.newConfiguration();
  DW1000.setDefaults();
  DW1000.commitConfiguration();

  Serial.println("DW1000 initialized.");
}

void loop() {
  const char* msg = messages[msgIndex];
  uint8_t len = strlen(msg);

  DW1000.newTransmit();
  DW1000.setData((byte*)msg, len);
  DW1000.startTransmit();

  Serial.print("Sent: ");
  Serial.println(msg);

  msgIndex++;
  if (msgIndex >= NUM_MESSAGES) {
    msgIndex = 0;
  }

  delay(1000);
}
